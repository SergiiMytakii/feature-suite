<div
  cdkDropList
  [id]="parentFeature?.id ?? 'root' "
  [cdkDropListData]="feature.subFeatures ?? []"
  [cdkDropListConnectedTo]="connectedDropListsIds"
  (cdkDropListDropped)="dropNested($event)">

  <mat-card class="selected-feature">
    <div class="card-content">
      {{ feature.name }}
      <button mat-icon-button (click)="deleteFeature(feature)">
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </mat-card>

  <div class="sub-feature-container">
    <div cdkDropList
      [id]="feature.id"
      [cdkDropListData]="feature.subFeatures ?? []"
      [cdkDropListConnectedTo]="connectedDropListsIds"
      (cdkDropListDropped)="dropNested($event)">
    
      <div class="drag-placeholder">Drag here</div>
      <div *ngFor="let subFeature of feature.subFeatures" class="indented">
        <app-feature-item 
          [feature]="subFeature" 
          [parentFeature]="feature"
          [connectedDropListsIds]="connectedDropListsIds"
          (dropEmitter)="dropNested($event)"
        ></app-feature-item>
      </div>
    </div>
  </div>
</div>