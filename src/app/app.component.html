<div class="container">
  <!-- Left: Basic Features List -->
  <div class="features-list"
       cdkDropList 
       [cdkDropListData]="features"
      (cdkDropListDropped)="drop($event)">
    <h3>Select Basic Features</h3>
    <div *ngFor="let feature of features" cdkDrag cdkDragHandle >
      <mat-card class="mat-card-custom"  >{{ feature.name }}</mat-card>
    </div>
  </div>

  <!-- Right: Selected Features List -->
  <div class="selected-features"
       cdkDropList 
       [cdkDropListData]="selectedFeatures"
       (cdkDropListDropped)="drop($event)">
    <h3>Selected Features</h3>
    
    <div class="light-blue">
      <div *ngFor="let feature of selectedFeatures" 
           >
        <mat-card class="selected-feature"
        (click)="activateSubList(feature)">{{ feature.name }}</mat-card>

        <!-- Nested Drop Area -->
        <div class="sub-feature-container">
          <div cdkDropList 
               [cdkDropListData]="feature.subFeatures ?? []"
               (cdkDropListDropped)="dropNested($event, feature)">
            <div *ngFor="let subFeature of feature.subFeatures" class="indented" >
              <mat-card class="selected-feature"
              (click)="activateSubList(subFeature)" >{{ subFeature.name }}</mat-card>
            </div>
            <!-- Placeholder for dragging new items into the sub-list -->
            <div  *ngIf="feature.isActive"   class="drag-placeholder">Drag here</div>
          </div>
        </div>
      </div>
      <div  class="drag-placeholder">Drag here</div>
    </div>
  </div>
</div>
